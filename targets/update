#!/bin/bash
# (C) 2013 David 'Mokon' Bond, All Rights Reserved

echo "Updating menv"

# TODO store hash in file and diff that.
ping -c1 -W1 github.com &> /dev/null
if [ $? ]; then
  menvs=`urldiff $menv_loc ~/menv &> /dev/null`
   
  if [[ $menvs ]] ; then
    echo "menv is up to date."
    return 0
  fi
else
  echo "Git Hub not reachable. Could not update."
  return -1
fi

pushd .

$menv_dir/uninstall
bash <(curl -s https://raw.github.com/Mokon/menv/master/core/remote_install)

popd

